{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport iziToast from 'izitoast';\n\nimport 'flatpickr/dist/flatpickr.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst refs = {\n  startButton: document.querySelector('button[data-start]'),\n  days: document.querySelector('span[data-days]'),\n  hours: document.querySelector('span[data-hours]'),\n  minutes: document.querySelector('span[data-minutes]'),\n  seconds: document.querySelector('span[data-seconds]'),\n  datetimePicker: document.querySelector('#datetime-picker'),\n};\n\nlet userSelectedDate = null;\nlet intervalId = null;\n\nconst MS_IN_SECOND = 1000;\nconst MS_IN_MINUTE = MS_IN_SECOND * 60;\nconst MS_IN_HOUR = MS_IN_MINUTE * 60;\nconst MS_IN_DAY = MS_IN_HOUR * 24;\n\nconst flatpickrOptions = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    const date = selectedDates[0];\n    handleDateSelection(date);\n  },\n};\n\nflatpickr('#datetime-picker', flatpickrOptions);\n\nconst disableStartButton = () =>\n  refs.startButton.setAttribute('disabled', true);\nconst enableStartButton = () => refs.startButton.removeAttribute('disabled');\n\nconst handleDateSelection = date => {\n  if (date <= Date.now()) {\n    iziToast.error({\n      message: 'Please choose a date in the future',\n      position: 'topRight',\n    });\n    disableStartButton();\n  } else {\n    enableStartButton();\n    userSelectedDate = date;\n  }\n};\n\nconst convertMs = ms => ({\n  days: Math.floor(ms / MS_IN_DAY),\n  hours: Math.floor((ms % MS_IN_DAY) / MS_IN_HOUR),\n  minutes: Math.floor((ms % MS_IN_HOUR) / MS_IN_MINUTE),\n  seconds: Math.floor((ms % MS_IN_MINUTE) / MS_IN_SECOND),\n});\n\nconst addLeadingZero = value => value.toString().padStart(2, '0');\n\nconst updateCountdownDisplay = ({ days, hours, minutes, seconds }) => {\n  refs.days.textContent = addLeadingZero(days);\n  refs.hours.textContent = addLeadingZero(hours);\n  refs.minutes.textContent = addLeadingZero(minutes);\n  refs.seconds.textContent = addLeadingZero(seconds);\n};\n\nconst startCountdown = remainingMs => {\n  intervalId = setInterval(() => {\n    remainingMs -= MS_IN_SECOND;\n    if (remainingMs <= 0) {\n      clearInterval(intervalId);\n      refs.datetimePicker.removeAttribute('disabled');\n      return;\n    }\n    updateCountdownDisplay(convertMs(remainingMs));\n  }, MS_IN_SECOND);\n};\n\nrefs.startButton.addEventListener('click', () => {\n  if (userSelectedDate) {\n    disableStartButton();\n    refs.datetimePicker.setAttribute('disabled', true);\n    startCountdown(userSelectedDate - Date.now());\n  }\n});\n"],"names":["refs","userSelectedDate","intervalId","MS_IN_SECOND","MS_IN_MINUTE","MS_IN_HOUR","MS_IN_DAY","flatpickrOptions","selectedDates","date","handleDateSelection","flatpickr","disableStartButton","enableStartButton","iziToast","convertMs","ms","addLeadingZero","value","updateCountdownDisplay","days","hours","minutes","seconds","startCountdown","remainingMs"],"mappings":"+IAMA,MAAMA,EAAO,CACX,YAAa,SAAS,cAAc,oBAAoB,EACxD,KAAM,SAAS,cAAc,iBAAiB,EAC9C,MAAO,SAAS,cAAc,kBAAkB,EAChD,QAAS,SAAS,cAAc,oBAAoB,EACpD,QAAS,SAAS,cAAc,oBAAoB,EACpD,eAAgB,SAAS,cAAc,kBAAkB,CAC3D,EAEA,IAAIC,EAAmB,KACnBC,EAAa,KAEjB,MAAMC,EAAe,IACfC,EAAeD,EAAe,GAC9BE,EAAaD,EAAe,GAC5BE,EAAYD,EAAa,GAEzBE,EAAmB,CACvB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,MAAMC,EAAOD,EAAc,CAAC,EAC5BE,EAAoBD,CAAI,CACzB,CACH,EAEAE,EAAU,mBAAoBJ,CAAgB,EAE9C,MAAMK,EAAqB,IACzBZ,EAAK,YAAY,aAAa,WAAY,EAAI,EAC1Ca,EAAoB,IAAMb,EAAK,YAAY,gBAAgB,UAAU,EAErEU,EAAsBD,GAAQ,CAC9BA,GAAQ,KAAK,OACfK,EAAS,MAAM,CACb,QAAS,qCACT,SAAU,UAChB,CAAK,EACDF,MAEAC,IACAZ,EAAmBQ,EAEvB,EAEMM,EAAYC,IAAO,CACvB,KAAM,KAAK,MAAMA,EAAKV,CAAS,EAC/B,MAAO,KAAK,MAAOU,EAAKV,EAAaD,CAAU,EAC/C,QAAS,KAAK,MAAOW,EAAKX,EAAcD,CAAY,EACpD,QAAS,KAAK,MAAOY,EAAKZ,EAAgBD,CAAY,CACxD,GAEMc,EAAiBC,GAASA,EAAM,SAAU,EAAC,SAAS,EAAG,GAAG,EAE1DC,EAAyB,CAAC,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,IAAO,CACpEvB,EAAK,KAAK,YAAciB,EAAeG,CAAI,EAC3CpB,EAAK,MAAM,YAAciB,EAAeI,CAAK,EAC7CrB,EAAK,QAAQ,YAAciB,EAAeK,CAAO,EACjDtB,EAAK,QAAQ,YAAciB,EAAeM,CAAO,CACnD,EAEMC,EAAiBC,GAAe,CACpCvB,EAAa,YAAY,IAAM,CAE7B,GADAuB,GAAetB,EACXsB,GAAe,EAAG,CACpB,cAAcvB,CAAU,EACxBF,EAAK,eAAe,gBAAgB,UAAU,EAC9C,MACD,CACDmB,EAAuBJ,EAAUU,CAAW,CAAC,CAC9C,EAAEtB,CAAY,CACjB,EAEAH,EAAK,YAAY,iBAAiB,QAAS,IAAM,CAC3CC,IACFW,IACAZ,EAAK,eAAe,aAAa,WAAY,EAAI,EACjDwB,EAAevB,EAAmB,KAAK,IAAK,CAAA,EAEhD,CAAC"}